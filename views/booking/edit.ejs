<%- include('../partials/header') %>

<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <div class="card shadow-lg border-0">
        <div class="card-header bg-warning text-dark py-4">
          <h3 class="mb-1"><i class="bi bi-pencil-square"></i> Edit Booking</h3>
          <p class="mb-0 text-dark-50">Lapangan: <strong><%= field.name %></strong></p>
        </div>
        <div class="card-body p-4">
          <% if (error) { %>
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
              <i class="bi bi-exclamation-triangle"></i> <%= error %>
              <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
          <% } %>

          <form method="POST" action="/booking/edit/<%= booking.id %>">
            <div class="mb-3">
              <label class="form-label fw-semibold">Tanggal Booking</label>
              <input 
                type="date" 
                name="booking_date" 
                class="form-control" 
                value="<%= booking.booking_date %>"
                required 
              />
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label fw-semibold">Jam Mulai</label>
                <input 
                  type="time" 
                  name="start_time" 
                  class="form-control" 
                  value="<%= booking.start_time %>"
                  required 
                />
              </div>

              <div class="col-md-6 mb-3">
                <label class="form-label fw-semibold">Jam Selesai</label>
                <input 
                  type="time" 
                  name="end_time" 
                  class="form-control" 
                  value="<%= booking.end_time %>"
                  required 
                />
              </div>
            </div>

            <div class="mb-4">
              <label class="form-label fw-semibold">Catatan (Opsional)</label>
              <textarea 
                name="note" 
                class="form-control" 
                rows="3"
              ><%= booking.note || '' %></textarea>
            </div>

            <div class="d-grid gap-2">
              <button class="btn btn-warning btn-lg fw-semibold" type="submit">
                <i class="bi bi-save"></i> Simpan Perubahan
              </button>
              <a href="/user/dashboard" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-left"></i> Kembali ke Dashboard
              </a>
            </div>
          </form>

          <hr class="my-4">

          <% if (bookings && bookings.length > 0) { %>
            <div class="alert alert-info">
              <strong><i class="bi bi-calendar-check"></i> Jadwal yang sudah terisi di hari itu:</strong>
              <ul class="mb-0 mt-2 small">
                <% bookings.forEach(b => { %>
                  <li>
                    <strong><%= b.start_time %> - <%= b.end_time %></strong>
                    <% if (b.id === booking.id) { %>
                      <span class="badge bg-warning ms-2">Booking Kamu</span>
                    <% } else { %>
                      <span class="badge bg-secondary ms-2"><%= b.status %></span>
                    <% } %>
                  </li>
                <% }); %>
              </ul>
            </div>
          <% } %>

        </div>
      </div>
    </div>
  </div>
</div>

<%- include('../partials/footer') %>
